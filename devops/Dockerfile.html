<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前言 | kikfan</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css">
    <meta name="description" content="kikfan">
    
    <link rel="preload" href="/assets/css/2.styles.051e8285.css" as="style"><link rel="preload" href="/assets/js/app.27b2d4ce.js" as="script"><link rel="preload" href="/assets/js/4.9a9f6078.js" as="script"><link rel="preload" href="/assets/js/57.c8880e0a.js" as="script"><link rel="prefetch" href="/assets/js/0.e4e7bdd7.js"><link rel="prefetch" href="/assets/js/1.fa961c29.js"><link rel="prefetch" href="/assets/js/10.731ee775.js"><link rel="prefetch" href="/assets/js/100.8f4b7cc5.js"><link rel="prefetch" href="/assets/js/101.a083f158.js"><link rel="prefetch" href="/assets/js/102.2c3648c3.js"><link rel="prefetch" href="/assets/js/103.f00d7dd8.js"><link rel="prefetch" href="/assets/js/104.0c414ab7.js"><link rel="prefetch" href="/assets/js/105.683675df.js"><link rel="prefetch" href="/assets/js/106.733b71a1.js"><link rel="prefetch" href="/assets/js/107.16837d98.js"><link rel="prefetch" href="/assets/js/108.28ae623b.js"><link rel="prefetch" href="/assets/js/109.a702f251.js"><link rel="prefetch" href="/assets/js/11.d7b558c8.js"><link rel="prefetch" href="/assets/js/110.74980c24.js"><link rel="prefetch" href="/assets/js/111.bf05772f.js"><link rel="prefetch" href="/assets/js/112.7f823ce5.js"><link rel="prefetch" href="/assets/js/113.4145bf66.js"><link rel="prefetch" href="/assets/js/114.4466ba9a.js"><link rel="prefetch" href="/assets/js/115.7066e3ba.js"><link rel="prefetch" href="/assets/js/116.dc1f78b7.js"><link rel="prefetch" href="/assets/js/117.88fe74db.js"><link rel="prefetch" href="/assets/js/118.e37e03b4.js"><link rel="prefetch" href="/assets/js/119.d7e4f790.js"><link rel="prefetch" href="/assets/js/12.42f2fa87.js"><link rel="prefetch" href="/assets/js/13.41e1d4b5.js"><link rel="prefetch" href="/assets/js/14.5b7e8e37.js"><link rel="prefetch" href="/assets/js/15.d9e0fc06.js"><link rel="prefetch" href="/assets/js/16.87dd9a3b.js"><link rel="prefetch" href="/assets/js/17.d120ed17.js"><link rel="prefetch" href="/assets/js/18.59184376.js"><link rel="prefetch" href="/assets/js/19.39139a03.js"><link rel="prefetch" href="/assets/js/20.2d9ec408.js"><link rel="prefetch" href="/assets/js/21.6e654bc3.js"><link rel="prefetch" href="/assets/js/22.1a060135.js"><link rel="prefetch" href="/assets/js/23.dcf0bfcc.js"><link rel="prefetch" href="/assets/js/24.9b4a4b3e.js"><link rel="prefetch" href="/assets/js/25.f57f3c65.js"><link rel="prefetch" href="/assets/js/26.fc43a3ae.js"><link rel="prefetch" href="/assets/js/27.e9aaf732.js"><link rel="prefetch" href="/assets/js/28.6e1886c7.js"><link rel="prefetch" href="/assets/js/29.ff720b7d.js"><link rel="prefetch" href="/assets/js/30.297554f4.js"><link rel="prefetch" href="/assets/js/31.fc02f056.js"><link rel="prefetch" href="/assets/js/32.978c9766.js"><link rel="prefetch" href="/assets/js/33.faa483ef.js"><link rel="prefetch" href="/assets/js/34.7f3cc871.js"><link rel="prefetch" href="/assets/js/35.62b9a752.js"><link rel="prefetch" href="/assets/js/36.c08848fc.js"><link rel="prefetch" href="/assets/js/37.59f685b7.js"><link rel="prefetch" href="/assets/js/38.c1588f41.js"><link rel="prefetch" href="/assets/js/39.fdb35fe6.js"><link rel="prefetch" href="/assets/js/40.65505803.js"><link rel="prefetch" href="/assets/js/41.54da323c.js"><link rel="prefetch" href="/assets/js/42.45bbba91.js"><link rel="prefetch" href="/assets/js/43.1f36637d.js"><link rel="prefetch" href="/assets/js/44.d7d8a539.js"><link rel="prefetch" href="/assets/js/45.7d764f0b.js"><link rel="prefetch" href="/assets/js/46.3bad6567.js"><link rel="prefetch" href="/assets/js/47.2946a535.js"><link rel="prefetch" href="/assets/js/48.85cbb854.js"><link rel="prefetch" href="/assets/js/49.315a2781.js"><link rel="prefetch" href="/assets/js/5.60a71eda.js"><link rel="prefetch" href="/assets/js/50.58a11a9c.js"><link rel="prefetch" href="/assets/js/51.ea33dd6c.js"><link rel="prefetch" href="/assets/js/52.c9f47820.js"><link rel="prefetch" href="/assets/js/53.012a446d.js"><link rel="prefetch" href="/assets/js/54.2c4f1849.js"><link rel="prefetch" href="/assets/js/55.2a967be9.js"><link rel="prefetch" href="/assets/js/56.2d46c0a0.js"><link rel="prefetch" href="/assets/js/58.a6b007f9.js"><link rel="prefetch" href="/assets/js/59.97b9b7e5.js"><link rel="prefetch" href="/assets/js/6.afcd84ec.js"><link rel="prefetch" href="/assets/js/60.f4a784fc.js"><link rel="prefetch" href="/assets/js/61.05eed8fc.js"><link rel="prefetch" href="/assets/js/62.d95be5f8.js"><link rel="prefetch" href="/assets/js/63.c0d0a152.js"><link rel="prefetch" href="/assets/js/64.f74c6626.js"><link rel="prefetch" href="/assets/js/65.4872ba36.js"><link rel="prefetch" href="/assets/js/66.3846d75c.js"><link rel="prefetch" href="/assets/js/67.5d3c513c.js"><link rel="prefetch" href="/assets/js/68.4c28dad7.js"><link rel="prefetch" href="/assets/js/69.23fa6377.js"><link rel="prefetch" href="/assets/js/7.69deb300.js"><link rel="prefetch" href="/assets/js/70.a1673575.js"><link rel="prefetch" href="/assets/js/71.53175f3c.js"><link rel="prefetch" href="/assets/js/72.699361e6.js"><link rel="prefetch" href="/assets/js/73.683bacf8.js"><link rel="prefetch" href="/assets/js/74.d27b950a.js"><link rel="prefetch" href="/assets/js/75.30cfcf8c.js"><link rel="prefetch" href="/assets/js/76.7115ba1f.js"><link rel="prefetch" href="/assets/js/77.61f7aec4.js"><link rel="prefetch" href="/assets/js/78.d9b71b38.js"><link rel="prefetch" href="/assets/js/79.8df96305.js"><link rel="prefetch" href="/assets/js/8.b5d41094.js"><link rel="prefetch" href="/assets/js/80.caefa481.js"><link rel="prefetch" href="/assets/js/81.fbe7f1af.js"><link rel="prefetch" href="/assets/js/82.8a0c0e86.js"><link rel="prefetch" href="/assets/js/83.77f553eb.js"><link rel="prefetch" href="/assets/js/84.9d3058ad.js"><link rel="prefetch" href="/assets/js/85.d66493d7.js"><link rel="prefetch" href="/assets/js/86.d82b3465.js"><link rel="prefetch" href="/assets/js/87.ff69dfdc.js"><link rel="prefetch" href="/assets/js/88.db8a809d.js"><link rel="prefetch" href="/assets/js/89.dbae01c0.js"><link rel="prefetch" href="/assets/js/9.42dfa068.js"><link rel="prefetch" href="/assets/js/90.ac501b95.js"><link rel="prefetch" href="/assets/js/91.de4c7a0e.js"><link rel="prefetch" href="/assets/js/92.689f4272.js"><link rel="prefetch" href="/assets/js/93.17e1c4ae.js"><link rel="prefetch" href="/assets/js/94.1978b8c9.js"><link rel="prefetch" href="/assets/js/95.fb0afeb1.js"><link rel="prefetch" href="/assets/js/96.8b6541d8.js"><link rel="prefetch" href="/assets/js/97.793aa5c6.js"><link rel="prefetch" href="/assets/js/98.62b7c58e.js"><link rel="prefetch" href="/assets/js/99.54020815.js">
    <link rel="stylesheet" href="/assets/css/2.styles.051e8285.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">kikfan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/idea/" class="nav-link">
  IDEA
</a></div><div class="nav-item"><a href="/devops/" class="nav-link router-link-active">
  DevOps
</a></div><div class="nav-item"><a href="/web/" class="nav-link">
  Web
</a></div><div class="nav-item"><a href="/curiousness/" class="nav-link">
  好奇尚异
</a></div><div class="nav-item"><a href="/long-road/" class="nav-link">
  道阻且长
</a></div><div class="nav-item"><a href="/step-back/" class="nav-link">
  海阔天空
</a></div><div class="nav-item"><a href="/experience/" class="nav-link">
  吃堑长智
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  Tools
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/idea/" class="nav-link">
  IDEA
</a></div><div class="nav-item"><a href="/devops/" class="nav-link router-link-active">
  DevOps
</a></div><div class="nav-item"><a href="/web/" class="nav-link">
  Web
</a></div><div class="nav-item"><a href="/curiousness/" class="nav-link">
  好奇尚异
</a></div><div class="nav-item"><a href="/long-road/" class="nav-link">
  道阻且长
</a></div><div class="nav-item"><a href="/step-back/" class="nav-link">
  海阔天空
</a></div><div class="nav-item"><a href="/experience/" class="nav-link">
  吃堑长智
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  Tools
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>DevOps</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/devops/Auto Vim.html" class="sidebar-link">Auto Vim</a></li><li><a href="/devops/Docker  安装系列.html" class="sidebar-link">Docker  安装系列</a></li><li><a href="/devops/Dockerfile.html" aria-current="page" class="active sidebar-link">Dockerfile</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/devops/Dockerfile.html#前言" class="sidebar-link">前言</a></li></ul></li><li><a href="/devops/Linux.html" class="sidebar-link">Linux</a></li><li><a href="/devops/Travis-CI持续集成.html" class="sidebar-link">Travis-CI持续集成</a></li><li><a href="/devops/Vim.html" class="sidebar-link">Vim</a></li><li><a href="/devops/docker.html" class="sidebar-link">docker</a></li><li><a href="/devops/goaccess.html" class="sidebar-link">goaccess</a></li><li><a href="/devops/配置 https 网站.html" class="sidebar-link">配置 https 网站</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p><strong>FROM：指定一个镜像，必须为第一个命令</strong></p> <p>FROM指令是最重要的一个且必须为 <code>DockerFile</code> 文件开篇的第一个非注释行，用于为映像文件构建过程指定基准镜像，后续的指令运行于此基准镜像所提供的运行环境。</p> <p>实践中，基准镜像可以是任何可用镜像文件，默认情况下，<code>docker build</code> 会在 <code>docker</code> 主机上查找指定的镜像文件，在其不存在时，则会从 <code>docker Hub Registry</code> 上拉取所需的镜像文件</p> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
　　FROM <span class="token operator">&lt;</span>image<span class="token operator">&gt;</span>
　　FROM <span class="token operator">&lt;</span>image<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>tag<span class="token operator">&gt;</span>
　　FROM <span class="token operator">&lt;</span>image<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>digest<span class="token operator">&gt;</span>
示例：
　　FROM mysql:5.6
注：
　　tag或digest是可选的，如果不使用这两个值时，会使用latest版本的基础镜像
</code></pre></div><h5 id="maintainer-维护者信息-还可以使用-label-指定各种元格式指定-maintainer"><a href="#maintainer-维护者信息-还可以使用-label-指定各种元格式指定-maintainer" class="header-anchor">#</a> **MAINTAINER：**维护者信息，还可以使用 <code>LABEL</code> 指定各种元格式指定 <code>maintainer</code></h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    MAINTAINER <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>
示例：
    MAINTAINER Jasper Xu
    MAINTAINER sorex@163.com
    MAINTAINER Jasper Xu <span class="token operator">&lt;</span>sorex@163.com<span class="token operator">&gt;</span>
</code></pre></div><h5 id="copy-功能类似add-但是是不会自动解压文件-也不能访问网络资源"><a href="#copy-功能类似add-但是是不会自动解压文件-也不能访问网络资源" class="header-anchor">#</a> <strong>COPY</strong>：功能类似ADD，但是是不会自动解压文件，也不能访问网络资源</h5> <p>用于从 <strong>Docker</strong> 主机复制文件至创建的新映像文件</p> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    COPY <span class="token operator">&lt;</span>src<span class="token operator">&gt;</span><span class="token punctuation">..</span>. <span class="token operator">&lt;</span>dest<span class="token operator">&gt;</span>
    COPY <span class="token punctuation">[</span><span class="token string">&quot;&lt;src&gt;&quot;</span>,<span class="token punctuation">..</span>. <span class="token string">&quot;&lt;dest&gt;&quot;</span><span class="token punctuation">]</span> 用于支持包含空格的路径
     <span class="token operator">&lt;</span>src<span class="token operator">&gt;</span>:要复制的源文件或目录，支持使用通配符
     <span class="token operator">&lt;</span>dest<span class="token operator">&gt;</span>：目标路径，即正在创建的image的文件系统路径；建议为<span class="token operator">&lt;</span>dest<span class="token operator">&gt;</span>使用绝对路径，否则，COPY指定则以WORKDIR为其起始路径；
      注意：在路径中有空白字符时，通常使用第二种格式
文件复制准则
 <span class="token operator">&lt;</span>src<span class="token operator">&gt;</span>必须是build上下文中的路径，不能是其父目录中的文件
 如果<span class="token operator">&lt;</span>src<span class="token operator">&gt;</span>是目录，则其内部文件或子目录会被递归复制，但<span class="token operator">&lt;</span>src<span class="token operator">&gt;</span>目录自身不会被复制
 如果指定了多个<span class="token operator">&lt;</span>src<span class="token operator">&gt;</span>，或在<span class="token operator">&lt;</span>src<span class="token operator">&gt;</span>中使用了通配符，则<span class="token operator">&lt;</span>dest<span class="token operator">&gt;</span>必须是一个目录，且必须以/结尾
 如果<span class="token operator">&lt;</span>dest<span class="token operator">&gt;</span>事先不存在，他将会被自动创建，这包括其父目录路径
</code></pre></div><h5 id="add-将本地文件添加到容器中-tar-类型文件会自动解压-网络压缩资源不会被解压-可以访问网络资源-类似-wget"><a href="#add-将本地文件添加到容器中-tar-类型文件会自动解压-网络压缩资源不会被解压-可以访问网络资源-类似-wget" class="header-anchor">#</a> **ADD：**将本地文件添加到容器中，<strong>tar</strong> 类型文件会自动解压(网络压缩资源不会被解压)，可以访问网络资源，类似 <strong>wget</strong></h5> <h5 id="workdir-工作目录-类似于cd-命令"><a href="#workdir-工作目录-类似于cd-命令" class="header-anchor">#</a> <strong>WORKDIR：<strong>工作目录，类似于</strong>cd</strong> 命令</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    WORKDIR /path/to/workdir
示例：
    WORKDIR /a  <span class="token punctuation">(</span>这时工作目录为/a<span class="token punctuation">)</span>
    WORKDIR b  <span class="token punctuation">(</span>这时工作目录为/a/b<span class="token punctuation">)</span>
    WORKDIR c  <span class="token punctuation">(</span>这时工作目录为/a/b/c<span class="token punctuation">)</span>
注：
　　通过WORKDIR设置工作目录后，Dockerfile中其后的命令RUN、CMD、ENTRYPOINT、ADD、COPY等命令都会在该目录下执行。在使用docker run运行容器时，可以通过-w参数覆盖构建时所设置的工作目录。
</code></pre></div><h5 id="volume-用于指定持久化目录-指定卷-注意在-dockerfile-中只能指定基于-docker-管理的卷"><a href="#volume-用于指定持久化目录-指定卷-注意在-dockerfile-中只能指定基于-docker-管理的卷" class="header-anchor">#</a> **VOLUME：**用于指定持久化目录（指定卷，注意在 <code>dockerfile</code> 中只能指定基于 <code>docker</code> 管理的卷）</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    VOLUME <span class="token punctuation">[</span><span class="token string">&quot;/path/to/dir&quot;</span><span class="token punctuation">]</span>
示例：
    VOLUME <span class="token punctuation">[</span><span class="token string">&quot;/data&quot;</span><span class="token punctuation">]</span>
    VOLUME <span class="token punctuation">[</span><span class="token string">&quot;/var/www&quot;</span>, <span class="token string">&quot;/var/log/apache2&quot;</span>, <span class="token string">&quot;/etc/apache2&quot;</span>
注：
　　一个卷可以存在于一个或多个容器的指定目录，该目录可以绕过联合文件系统，并具有以下功能：
卷可以容器间共享和重用
容器并不一定要和其它容器共享卷
修改卷后会立即生效
对卷的修改不会对镜像产生影响
卷会一直存在，直到没有任何容器在使用它
</code></pre></div><h5 id="expose-用于为容器打开指定要监听的端口以实现与外部通信"><a href="#expose-用于为容器打开指定要监听的端口以实现与外部通信" class="header-anchor">#</a> **EXPOSE：**用于为容器打开指定要监听的端口以实现与外部通信</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    EXPOSE <span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>port<span class="token operator">&gt;</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
示例：
    EXPOSE <span class="token number">80</span> <span class="token number">443</span>
    EXPOSE <span class="token number">8080</span>
    EXPOSE <span class="token number">11211</span>/tcp <span class="token number">11211</span>/udp
注：
　　EXPOSE并不会让容器的端口访问到主机。要使其可访问，需要在docker run运行容器时通过-p来发布这些端口，或通过-P参数来发布EXPOSE导出的所有端口
　　镜像中指定的是待暴露的端口是隐藏的，需要加上大写的-P选项，也可以自定义
</code></pre></div><h5 id="env-设置环境变量-用于为镜像定义所需的环境变量-并可被-dockerfile-文件中位于其后的其他指令所调用"><a href="#env-设置环境变量-用于为镜像定义所需的环境变量-并可被-dockerfile-文件中位于其后的其他指令所调用" class="header-anchor">#</a> **ENV：**设置环境变量，用于为镜像定义所需的环境变量，并可被 <code>DockerFile</code> 文件中位于其后的其他指令所调用</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    ENV <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>  <span class="token comment">##&lt;key&gt;之后的所有内容均会被视为其&lt;value&gt;的组成部分，因此，一次只能设置一个变量</span>
    ENV <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span><span class="token operator">=</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> <span class="token punctuation">..</span>.  <span class="token comment">##可以设置多个变量，每个变量为一个&quot;&lt;key&gt;=&lt;value&gt;&quot;的键值对，如果&lt;key&gt;中包含空格，可以使用\来进行转义，也可以通过&quot;&quot;来进行标示；另外，反斜线也可以用于续行</span>
示例：
    ENV myName John Doe
    ENV myDog Rex The Dog
    ENV <span class="token assign-left variable">myCat</span><span class="token operator">=</span>fluffy
</code></pre></div><h5 id="run-构建镜像时执行的命令"><a href="#run-构建镜像时执行的命令" class="header-anchor">#</a> **RUN：**构建镜像时执行的命令</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>RUN用于在镜像容器中执行命令，其有以下两种命令执行方式：
shell执行
格式：
    RUN <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span>
exec执行
格式：
    RUN <span class="token punctuation">[</span><span class="token string">&quot;executable&quot;</span>, <span class="token string">&quot;param1&quot;</span>, <span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span>
示例：
    RUN <span class="token punctuation">[</span><span class="token string">&quot;executable&quot;</span>, <span class="token string">&quot;param1&quot;</span>, <span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span>
    RUN apk update
    RUN <span class="token punctuation">[</span><span class="token string">&quot;/etc/execfile&quot;</span>, <span class="token string">&quot;arg1&quot;</span>, <span class="token string">&quot;arg1&quot;</span><span class="token punctuation">]</span>
注：
　　RUN指令创建的中间镜像会被缓存，并会在下次构建中使用。如果不想使用这些缓存镜像，可以在构建时指定--no-cache参数，如：docker build --no-cache
　　基于基础镜像执行，在操作时评估好基础镜像的能力
　　注意：json数组中，要使用双引号
</code></pre></div><h5 id="cmd-构建容器后调用-也就是在容器启动时才进行调用"><a href="#cmd-构建容器后调用-也就是在容器启动时才进行调用" class="header-anchor">#</a> **CMD：**构建容器后调用，也就是在容器启动时才进行调用</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    CMD <span class="token punctuation">[</span><span class="token string">&quot;executable&quot;</span>,<span class="token string">&quot;param1&quot;</span>,<span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>执行可执行文件，优先<span class="token punctuation">)</span>
    CMD <span class="token punctuation">[</span><span class="token string">&quot;param1&quot;</span>,<span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>设置了ENTRYPOINT，则直接调用ENTRYPOINT添加参数<span class="token punctuation">)</span>
    CMD <span class="token builtin class-name">command</span> param1 param2 <span class="token punctuation">(</span>执行shell内部命令<span class="token punctuation">)</span>
示例：
    CMD <span class="token builtin class-name">echo</span> <span class="token string">&quot;This is a test.&quot;</span> <span class="token operator">|</span> <span class="token function">wc</span> -
    CMD <span class="token punctuation">[</span><span class="token string">&quot;/usr/bin/wc&quot;</span>,<span class="token string">&quot;--help&quot;</span><span class="token punctuation">]</span>
注：
 　　CMD不同于RUN，CMD用于指定在容器启动时所要执行的命令，而RUN用于指定镜像构建时所要执行的命令。
</code></pre></div><h5 id="entrypoint-配置容器-使其可执行化。配合cmd可省去-application-只使用参数"><a href="#entrypoint-配置容器-使其可执行化。配合cmd可省去-application-只使用参数" class="header-anchor">#</a> **ENTRYPOINT：**配置容器，使其可执行化。配合CMD可省去&quot;application&quot;，只使用参数</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>格式：
    ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;executable&quot;</span>, <span class="token string">&quot;param1&quot;</span>, <span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>可执行文件, 优先<span class="token punctuation">)</span>
    ENTRYPOINT <span class="token builtin class-name">command</span> param1 param2 <span class="token punctuation">(</span>shell内部命令<span class="token punctuation">)</span>
示例：
    FROM ubuntu
    ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;top&quot;</span>, <span class="token string">&quot;-b&quot;</span><span class="token punctuation">]</span>
    CMD <span class="token punctuation">[</span><span class="token string">&quot;-c&quot;</span><span class="token punctuation">]</span>
注：
　　　ENTRYPOINT与CMD非常类似，不同的是通过docker run执行的命令不会覆盖ENTRYPOINT，而docker run命令中指定的任何参数，都会被当做参数再次传递给ENTRYPOINT。Dockerfile中只允许有一个ENTRYPOINT命令，多指定时会覆盖前面的设置，而只执行最后的ENTRYPOINT指令。
</code></pre></div><h5 id="user-指定运行容器时的用户名或-uid-后续的-run-也会使用指定用户。"><a href="#user-指定运行容器时的用户名或-uid-后续的-run-也会使用指定用户。" class="header-anchor">#</a> **USER：**指定运行容器时的用户名或 UID，后续的 RUN 也会使用指定用户。</h5> <p>使用USER指定用户时，可以使用用户名、UID或GID，或是两者的组合。当服务不需要管理员权限时，可以通过该命令指定运行用户。并且可以在之前创建所需要的用户</p> <div class="language-shell extra-class"><pre class="language-shell"><code>格式:
　　<span class="token environment constant">USER</span> user
　　<span class="token environment constant">USER</span> user:group
　　<span class="token environment constant">USER</span> uid
　　<span class="token environment constant">USER</span> uid:gid
　　<span class="token environment constant">USER</span> user:gid
　　<span class="token environment constant">USER</span> uid:group
 示例：
    　　<span class="token environment constant">USER</span> www
 注：
　　使用<span class="token environment constant">USER</span>指定用户后，Dockerfile中其后的命令RUN、CMD、ENTRYPOINT都将使用该用户。镜像构建完成后，通过docker run运行容器时，可以通过-u参数来覆盖所指定的用户。
</code></pre></div><h5 id="healthcheck-健康检查"><a href="#healthcheck-健康检查" class="header-anchor">#</a> **HEALTHCHECK：**健康检查</h5> <h5 id="arg-用于指定传递给构建运行时的变量"><a href="#arg-用于指定传递给构建运行时的变量" class="header-anchor">#</a> **ARG：**用于指定传递给构建运行时的变量</h5></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后编辑时间:</span> <span class="time">12/24/2020, 3:33:40 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/devops/Docker  安装系列.html" class="prev">
        Docker  安装系列
      </a></span> <span class="next"><a href="/devops/Linux.html">
        Linux
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.27b2d4ce.js" defer></script><script src="/assets/js/4.9a9f6078.js" defer></script><script src="/assets/js/57.c8880e0a.js" defer></script>
  </body>
</html>
